# 组件与单页组件

上节中我们介绍了渲染的声明，但是我们在实际应用中我们需要拆分vue的功能使项目的结构更清晰以便于后续维护。于是我们需要使用组件，让一个功能分拆成多个组件，帮助我们细化功能让组件的功能更单一，并使相同功能在项目中能够复用。

学习本节你需要了解的内容：

1. 箭头函数 [arrow function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Arrow_functions)

---

组件是vue中最为重要和强大的功能，我们可以把vue的应用想象成组件的集合。通过不同组件之间的组装和通信生成最终的应用。

## 生命周期钩子

组件也遵循vue的生命周期，我们可以通过在组件中监听对应生命周期事件来灵活控制组件，如：

```
<template>
    <div>{{hello}}</div>
</template>
<script>
    var data = { hello: 'Hello World' }
    setTimeout(function(){
        console.log('更新data值');
        data.hello='Hello New One';
    },1000)
    module.exports = {
        data(){
            return data
        },
        beforeUpdate(){
            console.log('显示新值',this.hello);
        }
    }
</script>
```

如上组件，我们通过监听beforeUpdate来查看改变的hello值。

打印数据依次为：

```
更新data值
显示新值 Hello New One
```

* 了解更详细的[生命周期钩子](http://vuejs.org/api/#Options-Lifecycle-Hooks)

## 组件与组件件的交互

在vue 2.0中提供了两种方式进行组件的交互：1.属性，2.事件，两者的关系如下图所示：

![](http://vuejs.org/images/props-events.png)

### 属性

```
Vue.component('child', {
  // declare the props
  props: ['message'],
  // just like data, the prop can be used inside templates
  // and is also made available in the vm as this.message
  template: '<span>{{ message }}</span>'
})
```

```
<child message="hello!"></child>
```

如上方官方文档所示，组件可以接收静态数据并展示，如下的形式也可以接收动态数据：

```
<child :my-message="parentMsg"></child>
```

_此时child接收的属性名是myMessage_

在组件内还可以定义属性验证，来严格规范组件传入属性。

    Vue.component('example', {
      props: {
        // basic type check (`null` means accept any type)
        propA: Number,
        // multiple possible types
        propB: [String, Number],
        // a required string
        propC: {
          type: String,
          required: true
        },
        // a number with default value
        propD: {
          type: Number,
          default: 100
        },
        // object/array defaults should be returned from a
        // factory function
        propE: {
          type: Object,
          default: function () {
            return { message: 'hello' }
          }
        },
        // custom validator function
        propF: {
          validator: function (value) {
            return value > 10
          }
        }
      }
    })

* 属性遵循单向数据流模式，当父组件的值变更，则子组件的值也会对应变更，但子组件data的变更并不会影响父组件。
* 请查看[官方文档了解更多](http://vuejs.org/guide/components.html#Props)。

## 事件

## 数据计算与监听

